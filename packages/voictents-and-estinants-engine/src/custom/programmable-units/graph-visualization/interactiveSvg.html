<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.5.0/dist/svg-pan-zoom.min.js"></script>
<body>
  <!-- SVG_PLACEHOLDER -->
</body>
<script>
  svgPanZoom('svg', {
    zoomScaleSensitivity: .3,
    minZoom: .2,
    maxZoom: 20,
  })

  const nodeList = [...document.getElementsByClassName('node')];

  const setEdgeColor = (element, color) => {
    element.setAttribute('stroke', color)

    if (element.tagName === 'polygon') {
      element.setAttribute('fill', color)
    }
  }

  nodeList.forEach((node) => {
    node.addEventListener('click', () => {
      const id = node.getAttribute('id');

      console.log(id)

      const allEdgeList = document.querySelectorAll('.edge > path, .edge > polygon');

      const incomingEdgeList = document.querySelectorAll(`.edge.head-${id} > path, .edge.head-${id} > polygon`)
      const outgoingEdgeList = document.querySelectorAll(`.edge.tail-${id} > path, .edge.tail-${id} > polygon`)

      allEdgeList.forEach((element) => {
        setEdgeColor(element, 'gray');
      })

      incomingEdgeList.forEach((element) => {
        setEdgeColor(element, 'green');
      })

      outgoingEdgeList.forEach((element) => {
        setEdgeColor(element, 'blue');
      })

      console.log(incomingEdgeList);
      console.log(outgoingEdgeList);
      console.log('---')
    })
  })
</script>
